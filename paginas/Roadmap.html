<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roadmap de Desenvolvimento: App Desktop para Home Assistant</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap');

        :root {
            --primary-color: #4CAF50; /* Verde Home Assistant */
            --secondary-color: #2196F3; /* Azul */
            --text-color: #333;
            --light-text-color: #666;
            --background-color: #f8f9fa;
            --card-background: #ffffff;
            --border-color: #e0e0e0;
            --code-background: #eef1f4;
            --highlight-color: #FFC107; /* Amarelo para destaque */
        }

        body {
            font-family: 'Open Sans', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 900px;
            margin: 40px auto;
            padding: 30px;
            background-color: var(--card-background);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--primary-color);
        }

        header h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.8em;
            color: var(--primary-color);
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        header p {
            font-size: 1.1em;
            color: var(--light-text-color);
            max-width: 700px;
            margin: 0 auto;
        }

        h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2em;
            color: var(--secondary-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
            margin-top: 40px;
            margin-bottom: 25px;
        }

        h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.6em;
            color: var(--text-color);
            margin-top: 30px;
            margin-bottom: 15px;
            border-left: 4px solid var(--highlight-color);
            padding-left: 10px;
        }

        h4 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.2em;
            color: var(--primary-color);
            margin-top: 20px;
            margin-bottom: 10px;
        }

        ul {
            list-style-type: none;
            padding-left: 0;
            margin-bottom: 20px;
        }

        ul li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        ul li::before {
            content: '•';
            color: var(--primary-color);
            font-weight: bold;
            position: absolute;
            left: 0;
            top: 0;
        }

        strong {
            font-weight: 600;
            color: var(--text-color);
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            background-color: var(--code-background);
            padding: 3px 6px;
            border-radius: 4px;
            color: var(--text-color);
            font-size: 0.9em;
        }

        .page-break {
            page-break-before: always;
        }

        /* Estilos específicos para as fases */
        .phase {
            margin-bottom: 50px;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--background-color);
        }

        .phase h3 {
            border-left-color: var(--secondary-color);
        }

        .action-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .action-item::before {
            content: '✔';
            color: var(--primary-color);
            font-weight: bold;
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .note {
            background-color: #fff3cd; /* Amarelo claro */
            border-left: 5px solid #ffc107; /* Amarelo */
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            color: #664d03;
        }
        .note strong {
            color: #664d03;
        }

        @media print {
            body {
                background-color: #fff;
                color: #000;
            }
            .container {
                box-shadow: none;
                border: none;
                margin: 0;
                padding: 0;
            }
            header {
                border-bottom: 1px solid var(--primary-color);
            }
            h1, h2, h3, h4 {
                color: #000 !important;
            }
            ul li::before {
                color: var(--primary-color) !important;
            }
            .phase {
                border: 1px solid #ccc;
                background-color: #fff;
            }
            .action-item::before {
                color: var(--primary-color) !important;
            }
            .note {
                background-color: #f0f0f0;
                border-left-color: #999;
                color: #333;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Roadmap de Desenvolvimento: Criando um App Desktop para Home Assistant</h1>
            <p>Um guia de aprendizado e ação, focado em facilidade de criação, para construir seu próprio controlador de casa inteligente para Windows usando tecnologias web (HTML, CSS, JavaScript) com Electron.</p>
        </header>

        <div class="page-break"></div>

        <h2>Parte 1: Roteiro de Aprendizagem</h2>
        <p>Este roteiro foca nos <strong>conceitos</strong> que você precisa dominar, em ordem de complexidade, para ser capaz de construir a aplicação do zero.</p>

        <div class="phase">
            <h3>Fase 1: Fundamentos da Web Interativa</h3>
            <p>O objetivo aqui é aprender como fazer uma página web reagir às ações do usuário, sem precisar recarregar a página.</p>
            <h4>JavaScript e a Manipulação do DOM (Document Object Model)</h4>
            <ul>
                <li><strong>Seleção de Elementos:</strong> Como o JavaScript "encontra" elementos no HTML para poder manipulá-los.
                    <ul>
                        <li><code>document.getElementById()</code></li>
                        <li><code>document.querySelector()</code> (Mais versátil para seleções CSS)</li>
                    </ul>
                </li>
                <li><strong>Manipulação de Conteúdo e Estilos:</strong> Como alterar o que está na tela.
                    <ul>
                        <li>Alterar textos (<code>.innerHTML</code>, <code>.textContent</code>)</li>
                        <li>Alterar estilos CSS (<code>.style.propertyName = 'value'</code>)</li>
                    </ul>
                </li>
                <li><strong>Eventos e Funções:</strong> Como executar código em resposta a uma ação do usuário.
                    <ul>
                        <li><code>addEventListener()</code>: O "ouvinte" de ações (ex: <code>'click'</code>, <code>'mouseover'</code>).</li>
                        <li>Funções: Como encapsular blocos de código para reutilização.</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="page-break"></div>

        <div class="phase">
            <h3>Fase 2: Comunicação com o Mundo Exterior</h3>
            <p>Aqui você aprende como fazer sua página buscar informações de outros sistemas na internet.</p>
            <h4>APIs e JavaScript Assíncrono</h4>
            <ul>
                <li><strong>Conceito de API REST:</strong> Entender que APIs são "URLs" que, quando acessadas, devolvem dados estruturados.
                    <ul>
                        <li>Métodos HTTP: A diferença entre <code>GET</code> (buscar dados) e <code>POST</code> (enviar dados para criar/modificar algo).</li>
                    </ul>
                </li>
                <li><strong>Formato de Dados JSON:</strong> Aprender a ler e interpretar o formato JSON, que é o padrão de comunicação na web.</li>
                <li><strong>JavaScript Assíncrono:</strong> A forma como o JS lida com tarefas que demoram (como uma requisição de rede) sem travar a interface do usuário.
                    <ul>
                        <li>Sintaxe <code>async/await</code>: A maneira moderna e legível de escrever código assíncrono.</li>
                    </ul>
                </li>
                <li><strong>A Função <code>fetch()</code>:</strong> O comando nativo do JavaScript para fazer requisições a APIs.</li>
            </ul>
        </div>

        <div class="page-break"></div>

        <div class="phase">
            <h3>Fase 3: Transformando um Site em App Desktop</h3>
            <p>Nesta fase, você aprende a "empacotar" suas habilidades web em um aplicativo nativo do Windows.</p>
            <h4>Introdução ao Electron e Ecossistema Node.js</h4>
            <ul>
                <li><strong>Node.js e NPM:</strong> O que são e por que são necessários.
                    <ul>
                        <li>Node.js: Permite executar JavaScript fora do navegador.</li>
                        <li>NPM (Node Package Manager): O gerenciador para instalar ferramentas (como o Electron).</li>
                    </ul>
                </li>
                <li><strong>Inicialização de um Projeto:</strong> Como usar o NPM para criar a estrutura básica de um projeto.
                    <ul>
                        <li><code>npm init</code> e o arquivo <code>package.json</code>.</li>
                    </ul>
                </li>
                <li><strong>Estrutura do Electron:</strong> Entender a arquitetura fundamental da plataforma.
                    <ul>
                        <li>Processo Principal (<code>main.js</code>): O "cérebro" que controla a janela e o sistema operacional.</li>
                        <li>Processo de Renderização (<code>renderer.js</code>): O código JavaScript que roda dentro da sua janela HTML.</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="page-break"></div>

        <div class="phase">
            <h3>Fase 4: Conectando com o Home Assistant</h3>
            <p>Aqui você aplica o conhecimento de API especificamente para controlar sua casa inteligente.</p>
            <h4>A API Específica do Home Assistant</h4>
            <ul>
                <li><strong>Autenticação:</strong> Como o Home Assistant garante que só você pode dar comandos.
                    <ul>
                        <li><em>Long-Lived Access Tokens</em> (Tokens de Acesso de Longa Duração).</li>
                    </ul>
                </li>
                <li><strong>Estrutura das Requisições:</strong> Entender como montar uma chamada <code>fetch</code> para o HA.
                    <ul>
                        <li>Headers de Autorização: O <code>Bearer Token</code>.</li>
                    </ul>
                </li>
                <li><strong>O Conceito de "Serviços":</strong> Como o Home Assistant executa ações (ex: <code>light.turn_on</code>, <code>switch.turn_off</code>).</li>
                <li><strong>Corpo da Requisição (<code>body</code>):</strong> Como especificar <em>qual</em> dispositivo você quer controlar.
                    <ul>
                        <li>O <code>entity_id</code> do seu dispositivo.</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="page-break"></div>

        <div class="phase">
            <h3>Fase 5: Finalização e Distribuição</h3>
            <p>O objetivo final é transformar seu projeto em um arquivo instalável que pode ser compartilhado.</p>
            <h4>Empacotamento e Boas Práticas</h4>
            <ul>
                <li><strong>Ferramentas de Build:</strong> Programas que automatizam a criação do instalador.
                    <ul>
                        <li><code>electron-builder</code>.</li>
                    </ul>
                </li>
                <li><strong>Configuração do Build:</strong> Como personalizar seu app (ícone, nome, etc.) através do <code>package.json</code>.</li>
                <li><strong>Gerenciamento de Configuração:</strong> Como salvar informações de forma segura no computador do usuário (ex: endereço do Home Assistant e o Token).
                    <ul>
                        <li><code>electron-store</code> (uma biblioteca para Electron).</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="page-break"></div>

        <h2>Parte 2: Guia Prático do Projeto</h2>
        <p>Este guia descreve as <strong>ações</strong> que você precisa tomar, fase a fase, para construir o aplicativo. Ele assume que você está aprendendo os conceitos da Parte 1 em paralelo.</p>

        <div class="phase">
            <h3>Fase 1: O Protótipo Interativo</h3>
            <p><strong>Meta:</strong> Criar uma página web local que reage a um clique.</p>
            <div class="action-item">
                <div>
                    <strong>Estrutura:</strong> Crie uma pasta vazia. Dentro dela, crie os arquivos <code>index.html</code> e <code>script.js</code>.
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Interface:</strong> No <code>index.html</code>, adicione os elementos essenciais:
                    <ul>
                        <li>Um botão para ligar (ex: <code>&lt;button id="btnLigar"&gt;Ligar Luz&lt;/button&gt;</code>)</li>
                        <li>Um botão para desligar (ex: <code>&lt;button id="btnDesligar"&gt;Desligar Luz&lt;/button&gt;</code>)</li>
                        <li>Um parágrafo para exibir o status (ex: <code>&lt;p id="status"&gt;Status: Desconhecido&lt;/p&gt;</code>)</li>
                    </ul>
                    Lembre-se de vincular o <code>script.js</code> ao <code>index.html</code> (<code>&lt;script src="script.js"&gt;&lt;/script&gt;</code> antes de <code>&lt;/body&gt;</code>).
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Lógica:</strong> No <code>script.js</code>, use <code>document.getElementById()</code> para pegar os botões e o parágrafo. Adicione <code>addEventListener('click', ...)</code> para os botões. Ao serem clicados, as funções devem mudar o <code>.textContent</code> do parágrafo de status (ex: "Luz Ligada!").
                </div>
            </div>
        </div>

        <div class="page-break"></div>

        <div class="phase">
            <h3>Fase 2: Buscando Dados da Web</h3>
            <p><strong>Meta:</strong> Fazer sua página consumir uma API pública para provar que a comunicação funciona.</p>
            <div class="action-item">
                <div>
                    <strong>Escolha uma API:</strong> Utilize uma API pública e gratuita. Sugestões:
                    <ul>
                        <li>Fatos sobre gatos: <code>https://catfact.ninja/fact</code> (retorna <code>{"fact": "...", "length": ...}</code>)</li>
                        <li>Citações do Kanye West: <code>https://api.kanye.rest</code> (retorna <code>{"quote": "..."}</code>)</li>
                    </ul>
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Implemente o <code>fetch</code>:</strong> Modifique a função do seu botão (ou crie uma nova). Ao invés de apenas mudar o texto, ela deve usar <code>async/await</code> e <code>fetch()</code> para chamar a API escolhida.
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Exiba os Dados:</strong> Após receber a resposta da API (que será JSON), use <code>response.json()</code> para parsear os dados. Extraia a informação relevante (ex: <code>data.fact</code> para a API de gatos) e exiba-a no seu parágrafo de status.
                </div>
            </div>
            <div class="note">
                <strong>Nota:</strong> Teste abrindo o <code>index.html</code> diretamente no seu navegador. Verifique o "Console" (F12) para erros.
            </div>
        </div>

        <div class="page-break"></div>

        <div class="phase">
            <h3>Fase 3: A Janela do Aplicativo</h3>
            <p><strong>Meta:</strong> Fazer seu protótipo web rodar como um aplicativo de desktop Windows.</p>
            <div class="action-item">
                <div>
                    <strong>Prepare o Ambiente:</strong>
                    <ol>
                        <li>Instale o <a href="https://nodejs.org/en/download" target="_blank">Node.js</a> no seu Windows (inclui NPM).</li>
                        <li>No terminal (Prompt de Comando ou PowerShell), navegue até a pasta do seu projeto.</li>
                        <li>Rode <code>npm init -y</code> (isso cria o arquivo <code>package.json</code>).</li>
                        <li>Rode <code>npm install electron --save-dev</code> para instalar o Electron como dependência de desenvolvimento.</li>
                    </ol>
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Crie o Processo Principal:</strong> Crie um arquivo chamado <code>main.js</code> na raiz do seu projeto. Copie o código básico da seção "Quick Start" da <a href="https://www.electronjs.org/docs/latest/tutorial/quick-start" target="_blank">documentação oficial do Electron</a>. O importante é que ele crie uma janela e carregue seu <code>index.html</code>.
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Configure o "Start":</strong> No arquivo <code>package.json</code>, na seção <code>"scripts"</code>, adicione ou modifique o script de inicialização: <code>"start": "electron ."</code>.
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Execute:</strong> No terminal, rode <code>npm start</code>. Sua página web deve agora abrir em uma janela de aplicativo Windows.
                </div>
            </div>
        </div>

        <div class="page-break"></div>

        <div class="phase">
            <h3>Fase 4: O Controle da Casa Inteligente</h3>
            <p><strong>Meta:</strong> Fazer o clique no botão do seu app controlar um dispositivo real.</p>
            <div class="action-item">
                <div>
                    <strong>Obtenha a Credencial:</strong> No seu Home Assistant, vá em <strong>"Configurações" &gt; "Pessoas" &gt; Seu Perfil de Usuário</strong>. Role até o final e crie um "Token de Acesso de Longa Duração". **Copie este token imediatamente!** Ele só é mostrado uma vez.
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Identifique o Alvo:</strong> No seu Home Assistant, vá em <strong>"Configurações" &gt; "Dispositivos e Serviços" &gt; "Entidades"</strong>. Encontre sua lâmpada e copie o `entity_id` exato (ex: <code>light.lampada_da_sala</code>).
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Adapte a Requisição:</strong> No seu <code>script.js</code>, modifique a função que estava chamando a API de gatos:
                    <ul>
                        <li>Altere a URL para o endereço da API de serviços do seu Home Assistant: <code>http://IP_DO_HA:8123/api/services/light/turn_on</code> (substitua <code>IP_DO_HA</code> pelo IP da sua VM).</li>
                        <li>Mude o método para <code>'POST'</code>.</li>
                        <li>Adicione os <code>headers</code>, incluindo o <code>Authorization</code>: <code>'Authorization': 'Bearer SEU_TOKEN_AQUI'</code>.</li>
                        <li>Adicione o <code>body</code> em formato JSON contendo o <code>entity_id</code> da sua lâmpada (ex: <code>body: JSON.stringify({ entity_id: 'light.lampada_da_sala' })</code>).</li>
                    </ul>
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Teste:</strong> Rode <code>npm start</code> no terminal e clique no botão do seu aplicativo. Sua lâmpada física deve acender ou apagar!
                </div>
            </div>
            <div class="note">
                <strong>Dica de Segurança:</strong> Não deixe o token "hardcoded" no <code>script.js</code> em um app real. Use uma solução como <code>electron-store</code> ou peça para o usuário digitar na primeira execução.
            </div>
        </div>

        <div class="page-break"></div>

        <div class="phase">
            <h3>Fase 5: O Produto Final</h3>
            <p><strong>Meta:</strong> Transformar seu projeto em um arquivo <code>.exe</code> instalável e independente.</p>
            <div class="action-item">
                <div>
                    <strong>Instale o "Empacotador":</strong> No terminal, rode <code>npm install electron-builder --save-dev</code>.
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Configure o Build:</strong> No seu <code>package.json</code>, adicione a seção <code>"build"</code> com as configurações básicas. Exemplo simplificado:
                    <pre><code>"build": {
    "appId": "com.seuprojeto.homeassistantcontroller",
    "win": {
        "target": "nsis",
        "icon": "build/icon.ico" // Opcional: Adicione um ícone .ico na pasta 'build'
    }
}</code></pre>
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Adicione o Script de Build:</strong> Crie um novo script na seção <code>"scripts"</code> do <code>package.json</code>: <code>"dist": "electron-builder"</code>.
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Gere o Instalador:</strong> No terminal, rode o comando <code>npm run dist</code>. Este processo pode levar vários minutos.
                </div>
            </div>
            <div class="action-item">
                <div>
                    <strong>Distribua:</strong> Após o build, uma nova pasta chamada <code>dist</code> (ou similar) será criada na raiz do seu projeto. Dentro dela, você encontrará o arquivo <code>.exe</code> instalável. Este é seu aplicativo final, pronto para ser compartilhado ou instalado em qualquer computador Windows.
                </div>
            </div>
        </div>

    </div>
</body>
</html>